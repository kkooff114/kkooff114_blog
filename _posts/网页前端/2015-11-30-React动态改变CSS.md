---
layout:         post
title:          React动态改变CSS
description:    React动态改变CSS, 使用React实现二级菜单
tags:           javascript, React, 二级菜单
keywords:       js, React, 二级菜单
noToc: 			  true
---

[TOC]


## 先上完整代码:

```javascript
// 两种样式,用来点击的时候切换
const selected = [
    'classify-menu-item-active',
    'classify-menu-item',
    'classify-menu-item',
    'classify-menu-item',
    'classify-menu-item'
];

const Menu = React.createClass({

	  // 初始化state中的selected变量
    getInitialState: function(){
        return {
            selected: selected
        };
    },

	  // 点击回调事件
    handleClick: function (parms) {
        selected.map(function(item, i){
            if(parms === i){
                selected[i] = 'classify-menu-item-active';
            } else {
                selected[i] = 'classify-menu-item';
            }
        })
        // 重新将selected变量放到state中
        this.setState({selected: selected});
    },

    render() {
        return (
            <div className="classify-menu-root">
                <div className="classify-menu">
                    <ul>
                        <li onClick={this.handleClick.bind(this,0)} className={this.state.selected[0]}><a><span>目录1</span></a></li>
                        <li onClick={this.handleClick.bind(this,1)} className={this.state.selected[1]}><a><span>目录2</span></a></li>
                        <li onClick={this.handleClick.bind(this,2)} className={this.state.selected[2]}><a><span>目录2</span></a></li>
                        <li onClick={this.handleClick.bind(this,3)} className={this.state.selected[3]}><a><span>目录2</span></a></li>
                        <li onClick={this.handleClick.bind(this,4)} className={this.state.selected[4]}><a><span>目录2</span></a></li>
                    </ul>
                </div>
                
            </div>

        );
    },
});
```

## 几个关键点
主要运用了`state`这个上下文中存储的`selected`数组变量

* 一开始`getInitialState()`方法中对state进行了初始化
* 在render中对空间样式进行绑定, 比如将`selected`中的`第0位`的className绑定到空间: `className={this.state.selected[0]}`,
* 此时, 如果`selected`中的`第0位`的值发生了变化, 改变化就会***立即***应用到绑定的控件中.
* 当点击每个item的时候, 回调`handleClick()`的时候实时改变`state`中的`selected`.



