---
layout:         post
title:          React使用小记
description:    React使用小记, 记录React第一次使用过程中碰到的问题与解决方案;以及一些功能笔记
tags:           javascript, React
keywords:       js, React
noToc: 			  true
---

[TOC]

##点击事件与传参
先定义一个`handleClick`的点击事件函数; 再通过`onClick`来调用这个事件函数

```javascript
const Menu = React.createClass({

    handleClick: function(event) {
        alert("点击");
    },

    render() {
        return (
                <div onClick={this.handleClick}>点击</div>
        );
    },
});
```

传参:

```javascript
const Menu = React.createClass({

    handleClick: function(parms) {
        alert("点击" + parms);
    },

    render() {
        return (
                <div onClick={this.handleClick.bind(this, '我是参数')}>点击</div>
        );
    },
});
```

注意 `bind(this, arg1, arg2, ...)` 的使用： 我们通过它向 handleClick 传递参数。 这不是 React 的新概念，而是 JavaScript 的。

React所支持的各种事件 : [事件系统](http://reactjs.cn/react/docs/events.html)


## AJAX的集成使用
在success回调中直接使用this.setState({data: data});他会报错说`setState not a function`
解决方案: 在success的后面用`bind(this)`

```javascript
$.ajax({
        url: 'http://'+Constants.host + '/' + Constants.projectName + '/shop/m/allCats.do',
        cache: false,
        dataType: 'jsonp',
        success: function(data){
            this.setState({menu: data});

        }.bind(this),   // 注意这里的bind(this)
        error: function(e){

        }
    });
```

