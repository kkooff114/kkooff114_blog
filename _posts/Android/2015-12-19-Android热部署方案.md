---
layout:         post
title:          Android热部署方案
description:    Android热部署方案
tags:           Android, 热部署
keywords:       Android, 热部署
noToc: 			  true
---



#原理
参考下面两篇文章可以总结:

1. 动态改变BaseDexClassLoader对象间接引用的dexElements；
2. 在app打包的时候，阻止相关类去打上CLASS_ISPREVERIFIED标志。

#实现
##防止CLASS_ISPREVERIFIED打上true
###ASM



###Javassist
>Javassist 使您可以检查、编辑以及创建 Java 二进制类。检查方面基本上与通过 Reflection API 直接在 Java 中进行的一样，但是当想要修改类而不只是执行它们时，则另一种访问这些信息的方法就很有用了。这是因为 JVM 设计上并没有提供在类装载到 JVM 中后访问原始类数据的任何方法，这项工作需要在 JVM 之外完成。
[Java 编程的动态性](http://www.ibm.com/developerworks/cn/java/j-dyn0916/)

阻止类打上`CLASS_ISPREVERIFIED`标志就需要使用Javassist






#参考
[Android dex分包方案](http://my.oschina.net/853294317/blog/308583)

[安卓App热补丁动态修复技术介绍](https://mp.weixin.qq.com/s?__biz=MzI1MTA1MzM2Nw==&mid=400118620&idx=1&sn=b4fdd5055731290eef12ad0d17f39d4a&scene=1&srcid=1106Imu9ZgwybID13e7y2nEi#wechat_redirect)

[ Android 热补丁动态修复框架小结](http://blog.csdn.net/lmj623565791/article/details/49883661)


