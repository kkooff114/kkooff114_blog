---
layout:         post
title:          Gradle学习
description:    在实践Android热部署解决方案的时候需要用的gradle来动态修改class中的方法,以及在编译的时候比较两个版本之前修改的class
tags:           Android, gradle
keywords:       Android, gradle
noToc: 			  true
---

#创建task
##基础
```java
task hello << {
    println 'Hello world!'
}
hello.doFirst {
    println 'Hello Venus'
}
hello.doLast {
    println 'Hello Mars'
}
```
以上定义了一个叫做hello的任务, 任务是一个可执行的`闭包`
其中`<<`可以替换成`doLast`

```java
task hello {
    doLast {
        println 'Hello world!'
    }
}
```
最终输出

```
Hello Venus
Hello world!
Hello Mars
```
##在 Gradle 任务里使用 Groovy
例子1: 
build.gradle

```java
task upper << {
    String someString = 'mY_nAmE'
    println "Original: " + someString
    println "Upper case: " + someString.toUpperCase()
}
```
cd到build.gradl路径下`gradle -q upper` 命令的输出

```
> gradle -q upper
Original: mY_nAmE
Upper case: MY_NAME
```

例子2: 
build.gradle

```java
task count << {
    4.times { print "$it " }
}
```
cd到build.gradl路径下`gradle -q upper` 命令的输出

```
> gradle -q count
0 1 2 3
```

##任务依赖
```java
task hello << {
    println 'Hello world!'
}

task intro(dependsOn: hello) << {
    println "I'm Gradle"
}

// 如果有多个任务需要被依赖
task intro(dependsOn: [hello1, hello2]) << {
    println "I'm Gradle"
}
```
```
gradle -q intro 命令的输出

```java
> gradle -q intro
Hello world!
I'm Gradle
```
任务intro依赖任务hello, 所以限制性hello, 再执行intro.

